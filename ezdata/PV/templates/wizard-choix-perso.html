{% extends 'base.html' %}

<head>
  <script>
    {% if messages %}
    {% for message in messages %}
    alert('{{message}}')
    {% endfor %}
    {% endif %}
  </script>
</head>

{% block content %}

<div class="wizard-navigation">
  <div class="progress-with-circle">
    <div class="progress-bar" role="progressbar" aria-valuenow="1" aria-valuemin="2" aria-valuemax="3"
      style="width: 21%"></div>
  </div>
  <ul>
    <li>
      <a href="" data-toggle="tab">
        <div class="icon-circle">
          <i class="ti-user"></i>
        </div>
        Informations génerales
      </a>
    </li>
    <li>
      <a href="" data-toggle="tab">
        <div class="icon-circle">
          <i class="ti-home"></i>
        </div>
        Bâtiments
      </a>
    </li>
    <li>
      <a href="" data-toggle="tab">
        <div class="icon-circle">
          <i class="ti-shine"></i>
        </div>
        Énergie
      </a>
    </li>
    <li>
      <a href="" data-toggle="tab">
        <div class="icon-circle">
          <i class="ti-car"></i>
        </div>
        Mobilité
      </a>
    </li>
  </ul>
</div>

<!--        You can switch " data-color="orange" "  with one of the next bright colors: "blue", "green", "orange", "red", "azure"          -->

<div class="tab-content">
  <h5 class="info-text">Profil personnalisé - Sélection</h5>
  <p class="category">
    Merci de sélectionner un profil personnalisé.
  </p>

  <hr class="divider" />

  <!-- <hr class="divider" />

  <p class="category">Courbe de charge</p>

  <hr class="divider" />

  <div class="row">
    <div class="col-md-10 col-md-offset-1">
      <div class="card card-stats">
        <div class="card-header"></div>
        <div class="card-body">
          <canvas id="line-chart" width="300" height="150"></canvas>
          <script>
            const chart = new Chart(document.getElementById("line-chart"), {
              type: 'bar',
              data: {
                labels: [...Array(24).keys()].map(i => `${String(i).padStart(2, '0')}:00`),
                datasets: [{
                  data: {{ graph }},
              type: 'line',
              label: "Consommation du bâtiment",
              borderColor: "#FF0000",
              backgroundColor: "#FDFEFE",
              fill: false,
            }]
                    },
            options: {
              plugins: {
                filler: {
                  propagate: true,
                                }
              },
              responsive: true,
                scales: {
                x: [{
                  stacked: true,
                  scaleLabel: {
                    display: true,
                    labelString: 'Heures'
                  }
                }],
                  y: [{
                    stacked: true,
                    scaleLabel: {
                      display: true,
                      labelString: 'kW'
                    }
                  }]
              },

              title: {
                display: false,
                  text: 'Profil énergétique'
              }
            }
            });
            document.querySelectorAll('input[type="number"]').forEach(
              (e) =>
              (e.oninput = function () {
                const data = [];
                for (let i = 0; i < 24; i++) {
                  data.push(parseInt(this.form.elements[`coeff_${i}`].value));
                }
                chart.data.datasets[0].data = data;
                chart.update();
              })
            );
          </script>
        </div>
      </div>
    </div>
  </div> -->

  <div class="row">
    <form method="POST">
      {% csrf_token %}
      <div class="row">
        <div class="col-sm-5 col-sm-offset-1">
          <div class="form-group">
            <label>Profil personnalisé - Jour ouvré </label>
            {{ formP1 }}
          </div>
        </div>
        <!-- <div class="col-sm-5">
          <div class="form-group">
            <label>Profil personnalisé - Weekend </label>
            {{ formP2 }}
          </div>
        </div> -->
      </div>
    </form>
  </div>

  <hr class="divider" />

  <div class="wizard-footer">
    <form action="" method="POST" name="formP">
      {% csrf_token %}
      <div class="pull-right">
        <input type="submit" class="btn btn-default btn-wd" name="Suivant" value="Suivant" />
      </div>
      <div class="pull-left">
        <input type="submit" class="btn btn-default btn-wd" name="Précédent" value="Précédent" />
      </div>

      <div class="clearfix"></div>
    </form>
  </div>
</div>

{% endblock %}